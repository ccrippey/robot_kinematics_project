#:kivy 2.3.1

<KeyframeEditor>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0

        BoxLayout:
            orientation: 'vertical'
            padding: 10    
            spacing: 10      
            size_hint_y: None
            height: top_bar1.height + top_bar2.height + top_bar3.height + 30  

            BoxLayout:
                id: top_bar1
                size_hint_y: None
                height: '48dp'
                spacing: 10
                Button:
                    text: 'Home'
                    on_release: root.go_home()
                Button:
                    text: 'Animation Play'
                    on_release: root.go_animation()
                Button:
                    text: 'Clear All Frames'
                    on_release: root.clear_frames()

            BoxLayout:
                id: top_bar2
                size_hint_y: None
                height: '48dp'
                spacing: 10
                Label:
                    text: root.frame_label
                    color: 0, 0, 0, 1
                Button:
                    text: '+ keyframe'
                    on_release: root.add_keyframe()
                Button:
                    text: '<<'
                    on_release: root.prev_frame()
                Spinner:
                    id: frame_spinner
                    size_hint_x: None
                    width: '120dp'
                    text: str(root.current_index + 1)
                    values: root.frame_choices
                    on_text: root.on_frame_chosen(self.text)
                Button:
                    text: '>>'
                    on_release: root.next_frame()

            BoxLayout:
                id: top_bar3
                size_hint_y: None
                height: '42dp'
                spacing: 10
                Label:
                    text: 'Viewing Angle:'
                    color: 0,0,0,1
                    size_hint_x: None
                    width: '100dp'
                Spinner:
                    text: str(root.projection_mode)
                    values: ["-90", "-45","0", "45", "90"]
                    size_hint_x: None
                    width: '140dp'
                    on_text: root.projection_mode = float(self.text)

        RelativeLayout:
            id: canvas_area
            canvas.before:
                Color:
                    rgba: 0.95, 0.95, 0.97, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            FloatLayout:
                id: ghost_layer
                opacity: 0
                PoseEditor:
                    id: ghost_pose

            PoseEditor:
                id: current_pose
